--Kusovník počty kusů
WITH RS (SOUCAST, PODSOUCAST, POCET) AS
( SELECT ROOT.SOUCAST, ROOT.PODSOUCAST, ROOT.POCET
     FROM SOUCASTI ROOT
     WHERE ROOT.SOUCAST = 'A'
  UNION ALL
  SELECT CHILD.SOUCAST, CHILD.PODSOUCAST, PARENT.POCET*CHILD.POCET 
    FROM RS PARENT, SOUCASTI CHILD
    WHERE PARENT.PODSOUCAST = CHILD.SOUCAST
)
SELECT PODSOUCAST, INT( SUM(POCET) ) as CELKEM 
  FROM RS
GROUP BY PODSOUCAST
ORDER BY PODSOUCAST
